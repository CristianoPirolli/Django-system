{% extends 'base.html' %}
{% block title %}{% if is_edit %}Editar Vacina{% else %}Nova Vacina{% endif %}{% endblock %}
{% block content %}
<div class="card shadow-sm">
    <div class="card-body">
        <h1 class="h4 mb-4">{% if is_edit %}Editar Vacina{% else %}Nova Vacina para {{ animal }}{% endif %}</h1>
        <form method="post">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-12 col-md-6">
                    {{ form.name.label_tag }}{{ form.name }}
                </div>
                <div class="col-12 col-md-6">
                    {{ form.application_date.label_tag }}{{ form.application_date }}
                </div>
                <div class="col-12 col-md-6">
                    <div class="form-check mt-4">
                        {{ form.second_dose }} {{ form.second_dose.label_tag }}
                    </div>
                </div>
                <div class="col-12 col-md-6 d-none" id="second-dose-date-field">
                    {{ form.second_dose_date.label_tag }}{{ form.second_dose_date }}
                </div>
            </div>
            <div class="mt-3 d-flex flex-column flex-sm-row gap-2">
                <button type="submit" class="btn btn-primary">Salvar</button>
                <a class="btn btn-secondary" href="{% url 'animal_detail' animal.pk %}">Voltar</a>
            </div>
        </form>
    </div>
</div>
<script>
    const checkbox = document.getElementById('id_second_dose');
    const dateField = document.getElementById('second-dose-date-field');
    function toggleDate() {
        if (checkbox.checked) {
            dateField.classList.remove('d-none');
        } else {
            dateField.classList.add('d-none');
        }
    }
    if (checkbox) {
        checkbox.addEventListener('change', toggleDate);
        toggleDate();
    }
</script>
{% endblock %}
